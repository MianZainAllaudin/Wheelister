<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignIn</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="signup.css">
   
</head>
<body>
    <div id="background-container" style="height: 90vh;">
        <div class="container-fluid">
            <div class="transparent-container">
                <!-- Content goes here -->
                <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
            </div>
        </div>
    </div>

    <p style="font-size: 37px;position: absolute;left: 110px;top: 20px;font-weight: bold;color: rgb(210, 210, 210);">WHEELISTER</p>
    <a href=""><img src="logo-removebg-preview.png" style="border-radius: 190px ;left: 10px;position: absolute;size: 50px;top: 0px;" alt=""></a>
    
        <div class="login-box" style="position: absolute;top: 230px;right: 120px;">
          <h2>REGISTER</h2>
          <input type="text" id="username" class="input-box" placeholder="Username">
          <input type="password" id="password" class="input-box" placeholder="Password">
          <input type="password" id="confirmPassword" class="input-box" placeholder="Confirm Password">
          <button class="btn" id="signupBtn">SIGNUP</button>
          
          <a href="login.html" class="forgot">Already have an account! Log In</a>
        </div>
      

        <script>
            document.querySelector(".btn").addEventListener("click", async () => {
                const username = document.querySelectorAll(".input-box")[0].value;
                const password = document.querySelectorAll(".input-box")[1].value;
                const confirmPassword = document.querySelectorAll(".input-box")[2].value;
            
                if (!username || !password || !confirmPassword) {
                    alert("All fields are required!");
                    return;
                }
            
                if (password !== confirmPassword) {
                    alert("Passwords do not match!");
                    return;
                }
            
                try {
                    const response = await fetch("http://localhost:3000/signup", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({ username, password })
                    });
            
                    const data = await response.json();
                    if(response.ok){
                        localStorage.setItem("username", username);
                        alert(data.message);
                        window.location.href="additionalinfo.html"
                    }
                    else{
                        alert(data.message);
                    }
                } catch (error) {
                    console.error("Signup Error:", error);
                    alert("An error occurred. Please try again.");
                }
            });
            </script>
            
    
</body>
</html>
